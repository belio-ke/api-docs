From 0c675d54a32b366aa695d8b0ba84ecbc4c68a76f Mon Sep 17 00:00:00 2001
From: AlanGacihi <alanmamicha@gmail.com>
Date: Fri, 9 May 2025 22:25:47 +0300
Subject: [PATCH] ENG-719 Update API docs with client scoping

---
 authentication/introduction.mdx | 10 +++++++++-
 message/introduction.mdx        | 11 ++++++-----
 message/send.mdx                |  6 ++++++
 openapi.json                    | 20 ++++++++++++++++++++
 overview.mdx                    |  6 +++---
 service/list.mdx                |  6 ++++++
 6 files changed, 50 insertions(+), 9 deletions(-)

diff --git a/authentication/introduction.mdx b/authentication/introduction.mdx
index 293ad8e..a713627 100644
--- a/authentication/introduction.mdx
+++ b/authentication/introduction.mdx
@@ -21,9 +21,17 @@ Authorization: Bearer <YOUR_BEARER_TOKEN>
 
 ## Advanced Security
 
-On the [API Access Keys](https://stage-cloud.belio.co.ke/team-overview/api-access-keys) page, you can set up additional security measures:
+On the [API Access Clients](https://stage-cloud.belio.co.ke/team-overview/api-access-keys) page, you can set up additional security measures:
+
+- **Authorization Scopes**: Define specific scopes for your API keys, controlling access to different parts of the API. Available scopes include:
+
+  - `mobilize.sms.send.oneway`: Send one way SMS
+  - `mobilize.service.list`: List services
 
 - **IP Whitelisting**: Restrict API access to specific IP addresses, adding an extra layer of security for your production environment.
+  Example: `192.168.1.1, 10.0.0.5, 203.0.113.42, 2001:db8:85a3::8a2e:370:7334, fd00:1234:5678::1`
+
 - **Web Origins**: Define allowed web origins (domains) that can make API requests, preventing unauthorized cross-origin requests.
+  Example: `https://yourdomain.com, https://app.yourcompany.io`
 
 These security features help ensure that only trusted sources can access your API keys and make requests to the Belio REST API.
diff --git a/message/introduction.mdx b/message/introduction.mdx
index 42a16be..5cc0610 100644
--- a/message/introduction.mdx
+++ b/message/introduction.mdx
@@ -5,12 +5,13 @@ title: "Introduction"
 This API enables you to send messages to recipients efficiently while allowing
 management and monitoring of message delivery through callbacks.
 
-## Prerequisite
+## Prerequisites
 
-Before you begin, ensure you have a valid and active **Service ID**. You can obtain one
-by visiting the [Services](https://stage-cloud.belio.co.ke/services) page. Use the
-[Service](/service) endpoint to list and retrieve the ID of the specific service
-you intend to use.
+Before you begin, ensure you have:
+
+- A valid and active **Service** - You can obtain one by visiting the [Services](https://stage-cloud.belio.co.ke/services) page
+- The **Service ID** - Use the [Service](/service) endpoint to list all services and retrieve the ID of the specific one you intend to use
+- **API Client Authorization** - This endpoint requires the `mobilize.sms.send.oneway` API client authorization scope to send one way messages. You can set up scopes on the [API Clients](https://stage-cloud.belio.co.ke/team-overview/api-access-keys) page
 
 ## Advanced Features
 
diff --git a/message/send.mdx b/message/send.mdx
index c61f43c..51d2ad9 100644
--- a/message/send.mdx
+++ b/message/send.mdx
@@ -7,3 +7,9 @@ openapi: "POST /message/{serviceId}"
   Refer to [Authentication](/authentication) for information on how to obtain a
   Bearer token.
 </Note>
+
+<Note>
+  This endpoint requires the `mobilize.sms.send.oneway` API client authorization
+  scope to send one way messages. You can set up scopes on the [API
+  Clients](https://stage-cloud.belio.co.ke/team-overview/api-access-keys) page.
+</Note>
diff --git a/openapi.json b/openapi.json
index 7ec0093..f10f4e5 100644
--- a/openapi.json
+++ b/openapi.json
@@ -165,6 +165,16 @@
               }
             }
           },
+          "429": {
+            "description": "Rate limit",
+            "content": {
+              "application/json": {
+                "schema": {
+                  "$ref": "#/components/schemas/APIError"
+                }
+              }
+            }
+          },
           "500": {
             "description": "Internal server error",
             "content": {
@@ -340,6 +350,16 @@
               }
             }
           },
+          "429": {
+            "description": "Rate limit",
+            "content": {
+              "application/json": {
+                "schema": {
+                  "$ref": "#/components/schemas/AuthError"
+                }
+              }
+            }
+          },
           "500": {
             "description": "Internal server error",
             "content": {
diff --git a/overview.mdx b/overview.mdx
index 9e4e18b..029c7eb 100644
--- a/overview.mdx
+++ b/overview.mdx
@@ -8,14 +8,14 @@ The API is designed to be easy to use and flexible, allowing you to interact
 with your data in a way that suits your needs.
 
 ```http
-https://stage-mobilize-api-service/v1
+https://stage-api.belio.co.ke
 ```
 
 This API follows HTTP rules, enabling a wide range of HTTP clients can be used to interact with the API.
 
 ## Getting Started
 
-To get started, request for API access at [API Access Keys](https://stage-cloud.belio.co.ke/team-overview/api-access-keys).
+To get started, request for API access at [API Access Clients](https://stage-cloud.belio.co.ke/team-overview/api-access-keys).
 This will provide you with a `client_id` and `client_secret`.
 Make sure to keep these credentials secure, as they are used to authenticate your requests.
 
@@ -32,4 +32,4 @@ The following is a list of the main endpoints available:
 | Endpoint                                   | Description                                            |
 | :----------------------------------------- | :----------------------------------------------------- |
 | [Send Message](/send-message/introduction) | Send messages using `sendToEach` or `sendToMany` modes |
-| [Service](/service/get)                    | Retrieve services                                      |
+| [Service](/service/list)                   | Retrieve services                                      |
diff --git a/service/list.mdx b/service/list.mdx
index cea7696..3629f8a 100644
--- a/service/list.mdx
+++ b/service/list.mdx
@@ -7,3 +7,9 @@ openapi: "GET /service"
   Refer to [Authentication](/authentication) for information on how to obtain a
   Bearer token.
 </Note>
+
+<Note>
+  This endpoint requires the `mobilize.service.list` API client authorization
+  scope to access the list of services. You can set up scopes on the [API
+  Clients](https://stage-cloud.belio.co.ke/team-overview/api-access-keys) page.
+</Note>
-- 
2.49.0

